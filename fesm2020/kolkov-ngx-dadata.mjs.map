{"version":3,"file":"kolkov-ngx-dadata.mjs","sources":["../../../projects/ngx-dadata/src/lib/ngx-dadata.service.ts","../../../projects/ngx-dadata/src/lib/dadata-config.ts","../../../projects/ngx-dadata/src/lib/ngx-dadata.component.ts","../../../projects/ngx-dadata/src/lib/ngx-dadata.component.html","../../../projects/ngx-dadata/src/lib/ngx-dadata.module.ts","../../../projects/ngx-dadata/src/public-api.ts","../../../projects/ngx-dadata/src/kolkov-ngx-dadata.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {DadataResponse} from './models/dadata-response';\r\nimport {Bounds, DadataConfig, Location} from './dadata-config';\r\n\r\nexport enum DadataType {\r\n  fio = 'fio',\r\n  address = 'address',\r\n  party = 'party',\r\n  bank = 'bank',\r\n  email = 'email'\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxDadataService {\r\n  apiKey = '';\r\n\r\n  constructor(private http: HttpClient) {\r\n  }\r\n\r\n  setApiKey(key: string) {\r\n    this.apiKey = key;\r\n  }\r\n\r\n  // eslint-disable-next-line max-len\r\n  getData(value: string, type: DadataType = DadataType.address, config: DadataConfig): Observable<DadataResponse> {\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        Authorization: 'Token ' + this.apiKey,\r\n      })\r\n    };\r\n    const body = Object.assign(\r\n      {},\r\n      {query: value},\r\n      {count: config?.limit},\r\n      {locations: config?.locations},\r\n      {location_boost: config?.locationsBoost},\r\n      {from_bound: config?.bounds?.fromBound},\r\n      {to_bound: config?.bounds?.toBound}\r\n    );\r\n    console.log(body);\r\n    return this.http.post<DadataResponse>('https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/' + type, body, httpOptions);\r\n  }\r\n}\r\n","import {DadataType} from './ngx-dadata.service';\r\n\r\nexport interface Location {\r\n  country?: string;\r\n  country_iso_code?: string;\r\n  region?: string;\r\n  area?: string;\r\n  city?: string;\r\n  street?: string;\r\n  street_type_full?: string;\r\n  settlement_type_full?: string;\r\n  city_district_type_full?: string;\r\n  city_type_full?: string;\r\n  area_type_full?: string;\r\n  region_type_full?: string;\r\n  kladr_id?: string;\r\n  region_fias_id?: string;\r\n  area_fias_id?: string;\r\n  city_fias_id?: string;\r\n  settlement_fias_id?: string;\r\n  street_fias_id?: string;\r\n}\r\n\r\nexport interface Bound {\r\n  value: 'country' | 'region' | 'city' | 'street' | 'settlement' | 'area' | 'house';\r\n}\r\n\r\nexport interface Bounds {\r\n  fromBound?: Bound;\r\n  toBound?: Bound;\r\n}\r\n\r\nexport interface DadataConfig {\r\n  apiKey: string;\r\n  type?: DadataType;\r\n  delay?: number;\r\n  limit?: number;\r\n  width?: 'auto' | string;\r\n  minWidth?: '0' | string;\r\n  partyAddress?: 'city' | 'full';\r\n  locations?: Location[];\r\n  locationsBoost?: Location[];\r\n  bounds?: Bounds;\r\n}\r\n\r\nexport const DadataConfigDefault: DadataConfig = {\r\n  apiKey: '',\r\n  type: DadataType.address,\r\n  delay: 500,\r\n  limit: 10,\r\n  width: 'auto',\r\n  minWidth: '0',\r\n  partyAddress: 'city',\r\n  locations: null,\r\n};\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef,\r\n  HostListener, Inject,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {DadataType, NgxDadataService} from './ngx-dadata.service';\r\nimport {Subject, timer} from 'rxjs';\r\nimport {debounce} from 'rxjs/operators';\r\nimport {DadataResponse} from './models/dadata-response';\r\nimport {DadataSuggestion} from './models/suggestion';\r\nimport {DadataConfig, DadataConfigDefault} from './dadata-config';\r\nimport {ControlValueAccessor, FormControl, NG_VALIDATORS, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {unwrapHtmlForSink} from 'safevalues';\r\nimport {createHtml} from 'safevalues/implementation/html_impl';\r\n\r\n/*const NGX_DADATA_VALIDATOR = {\r\n  provide: NG_VALIDATORS,\r\n  useExisting: forwardRef(() => NgxDadataComponent),\r\n  multi: true,\r\n};*/\r\n\r\nexport function createDaDataValidator(value) {\r\n  return (c: FormControl) => {\r\n    const err = {\r\n      rangeError: {\r\n        given: c.value,\r\n        expected: value,\r\n      }\r\n    };\r\n\r\n    return (c.value !== value) ? err : null;\r\n  };\r\n}\r\n\r\n/**\r\n * Autocomplete IDs need to be unique across components, so this counter exists outside of\r\n * the component definition.\r\n */\r\nlet uniqueDadataIdCounter = 0;\r\n\r\n@Component({\r\n  selector: 'ngx-dadata',\r\n  templateUrl: './ngx-dadata.component.html',\r\n  styleUrls: ['./ngx-dadata.component.scss'],\r\n  providers: [\r\n    {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => NgxDadataComponent),\r\n    multi: true\r\n  }, /*NGX_DADATA_VALIDATOR*/]\r\n})\r\nexport class NgxDadataComponent implements OnInit, ControlValueAccessor, OnChanges {\r\n  private v: any = '';\r\n  currentFocus = -1;\r\n\r\n  opened = false;\r\n\r\n  data: DadataSuggestion[] = [];\r\n\r\n  @Input() config: DadataConfig = DadataConfigDefault;\r\n  @Input() apiKey: string;\r\n  @Input() disabled = null;\r\n  @Input() type = DadataType.address;\r\n  @Input() limit = DadataConfigDefault.limit;\r\n  @Input() placeholder = '';\r\n  @Input() locations = null;\r\n\r\n  @Output() selectedSuggestion: DadataSuggestion;\r\n  @Output() selected: EventEmitter<DadataSuggestion> = new EventEmitter<DadataSuggestion>();\r\n  // @Output() selectedData = new EventEmitter<DaDataAddress | DaDataFIO | DaDataBank | DaDataParty | DaDataEmail>();\r\n  // @Output() selectedString = new EventEmitter<string>();\r\n\r\n  @ViewChild('inputValue', { static: true }) inputValue: ElementRef;\r\n\r\n  private inputString$ = new Subject<string>();\r\n\r\n  /** Unique ID to be used by autocomplete trigger's \"aria-owns\" property. */\r\n  id = `ngx-dadata-${uniqueDadataIdCounter++}`;\r\n\r\n  // onSuggestionSelected = (value: string) => {};\r\n  onTouched = () => {};\r\n  propagateChange: any = () => {};\r\n  validateFn: any = () => {};\r\n\r\n  constructor(\r\n    private dataService: NgxDadataService,\r\n    private r: Renderer2,\r\n    private elRef: ElementRef,\r\n    @Inject(DOCUMENT) private document: Document,\r\n    ) {\r\n  }\r\n\r\n  get value(): any {\r\n    return this.v;\r\n  }\r\n\r\n  set value(v: any) {\r\n    if (v !== this.v) {\r\n      this.v = v;\r\n      this.propagateChange(v);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    /*this.validateFn = createDaDataValidator(this._value);\r\n    this.propagateChange(this._value);*/\r\n    this.type = this.config.type;\r\n    this.locations = this.config.locations;\r\n    this.dataService.setApiKey(this.apiKey ? this.apiKey : this.config.apiKey);\r\n    this.inputString$.pipe(\r\n      debounce(() => timer(this.config.delay ? this.config.delay : 500)),\r\n    ).subscribe(x => {\r\n      this.dataService.getData(x, this.type, this.config)\r\n        .subscribe((y: DadataResponse) => {\r\n        this.data = y.suggestions;\r\n        if (this.data.length) {\r\n          this.opened = true;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.value) {\r\n      // console.log('ngOnChanges');\r\n    }\r\n  }\r\n\r\n  getData(value: string) {\r\n    this.inputString$.next(value);\r\n    this.currentFocus = -1;\r\n  }\r\n\r\n  onClick(e: MouseEvent, item: DadataSuggestion) {\r\n    this.inputValue.nativeElement.value = item.value;\r\n    this.propagateChange(item.value);\r\n    this.inputValue.nativeElement.focus();\r\n    this.selectedSuggestion = item;\r\n    this.data = [];\r\n    this.currentFocus = -1;\r\n    this.opened = false;\r\n    this.selected.emit(item);\r\n    // this.selectedData.emit(item.data);\r\n    // this.selectedString.emit(item.value);\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  onOutsideClick($event: MouseEvent) {\r\n    if (!this.opened) {\r\n      return;\r\n    }\r\n    if (!this.elRef.nativeElement.contains($event.target)) {\r\n      this.data = [];\r\n      this.opened = false;\r\n    }\r\n  }\r\n\r\n  onArrowDown() {\r\n    this.removeFocus(this.currentFocus);\r\n    if (this.currentFocus >= this.data.length - 1) {\r\n      this.currentFocus = 0;\r\n    } else {\r\n      this.currentFocus++;\r\n    }\r\n    this.setFocus(this.currentFocus);\r\n  }\r\n\r\n  onArrowUp() {\r\n    this.removeFocus(this.currentFocus);\r\n    if (this.currentFocus === 0) {\r\n      this.currentFocus = this.data.length - 1;\r\n    } else {\r\n      this.currentFocus--;\r\n    }\r\n    this.setFocus(this.currentFocus);\r\n  }\r\n\r\n  onEnter(event: KeyboardEvent) {\r\n    this.selectedSuggestion = this.data[this.currentFocus];\r\n    this.inputValue.nativeElement.value = this.selectedSuggestion.value;\r\n    this.data = [];\r\n    this.currentFocus = -1;\r\n    this.propagateChange(this.selectedSuggestion.value);\r\n    this.selected.emit(this.selectedSuggestion);\r\n    // this.selectedData.emit(this.selectedSuggestion.data);\r\n    // this.selectedString.emit(this.selectedSuggestion.value);\r\n  }\r\n\r\n  setFocus(id: number) {\r\n    const activeEl = this.document.getElementById(id + 'item');\r\n    this.r.addClass(activeEl, 'active');\r\n  }\r\n\r\n  removeFocus(id: number) {\r\n    if (id !== -1) {\r\n      const activeEl = this.document.getElementById(id + 'item');\r\n      this.r.removeClass(activeEl, 'active');\r\n    }\r\n  }\r\n\r\n  writeValue(value: any): void {\r\n    if (value !== undefined && value !== null) {\r\n      this.v = value;\r\n    } else {\r\n      this.v = '';\r\n    }\r\n\r\n    this.r.setProperty(this.inputValue.nativeElement, 'innerHTML', unwrapHtmlForSink(createHtml(this.v)));\r\n  }\r\n\r\n  /**\r\n   * Set the function to be called\r\n   * when the control receives a change event.\r\n   *\r\n   * @param fn a function\r\n   */\r\n  registerOnChange(fn: any): void {\r\n    // this.onSuggestionSelected = fn;\r\n    this.propagateChange = fn;\r\n  }\r\n\r\n  /**\r\n   * Set the function to be called\r\n   * when the control receives a touch event.\r\n   *\r\n   * @param fn a function\r\n   */\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  /**\r\n   * Implements disabled state for this element\r\n   *\r\n   * @param isDisabled Disabled state flag\r\n   */\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this.disabled = isDisabled;\r\n  }\r\n}\r\n","<div class=\"autocomplete\">\r\n  <input [disabled]=\"disabled  ? true : null\" type=\"text\" class=\"search\" #inputValue (input)=\"getData(inputValue.value)\"\r\n         [placeholder]=\"placeholder\" (keyup.ArrowDown)=\"onArrowDown()\" (keyup.ArrowUp)=\"onArrowUp()\"\r\n         (keyup.Enter)=\"onEnter($event)\" spellcheck=\"false\" [(ngModel)]=\"value\" autocomplete=\"off\" />\r\n  <div *ngIf=\"data.length\">\r\n    <div class=\"autocomplete-items\">\r\n      <div class=\"autocomplele-item\" *ngFor=\"let item of data; let i = index\" (click)=\"onClick($event, item)\" [id]=\"i+'item'\">\r\n        {{item.value}}\r\n        <ng-template [ngIf]=\"type==='party'\">\r\n          <br/>\r\n          <span>{{item.data?.inn}} {{config.partyAddress === 'full' ? item.data?.address?.value : item.data?.address?.data?.city}}</span>\r\n        </ng-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { NgxDadataComponent } from './ngx-dadata.component';\r\nimport {CommonModule} from '@angular/common';\r\nimport {FormsModule} from '@angular/forms';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule\r\n  ],\r\n  declarations: [NgxDadataComponent],\r\n  exports: [NgxDadataComponent]\r\n})\r\nexport class NgxDadataModule { }\r\n","/*\r\n * Public API Surface of ngx-dadata\r\n */\r\n\r\nexport * from './lib/ngx-dadata.service';\r\nexport * from './lib/ngx-dadata.component';\r\nexport * from './lib/ngx-dadata.module';\r\nexport * from './lib/dadata-config';\r\nexport * from './lib/models/data';\r\nexport * from './lib/models/suggestion';\r\nexport {DadataType} from './lib/ngx-dadata.service';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}